<!DOCTYPE html>
<html lang="en">
<head>
   
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate Offline Playlist Player</title>
     <!-- ADD THESE LINES TO YOUR <head> -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#000000">
<link rel="manifest" href="manifest.webmanifest">
    
    <script src="gh-pages-config.js"></script>
    <!-- Platform detection (must load before other scripts) -->
 <script src="chromeOS-detector.js"></script>
 <script src="config-constants.js"></script>
    <!-- DESKTOP BROWSER ICONS - ADD TO <head> -->
<link rel="icon" type="image/png" sizes="32x32" href="icon-192.png">
<link rel="icon" type="image/png" sizes="16x16" href="icon-192.png">
<link rel="shortcut icon" href="icon-192.png">
<link rel="apple-touch-icon" href="icon-192.png">
    
    <!-- Link to external CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="drop-zone">DROP FILES TO LOAD</div>
    <h1>ğŸµ Ultimate Local Music Player</h1>
    <div id="mode-indicator"></div>
    
    <div id="metadata-container">
        <button class="sticky-close" style="display: none;">âœ•</button>
        <div id="cover-art-container">
            <img id="cover-art" alt="Album Art">
            <div id="cover-placeholder">ğŸµ</div>
        </div>
        <div id="info-details">
            <div class="label">Now Playing</div>
            <div class="value" id="track-title">No track loaded</div>
            <div class="label">Artist</div>
            <div class="value" id="track-artist">--</div>
            <div class="label">Album</div>
            <div class="value" id="track-album">--</div>
        </div>
    </div>
    
    <div id="playlist-status">Load music files to begin</div>

    <div id="controls"> 
        <button id="load-button">ğŸ“‚ Load Music & Lyrics</button>
        <button id="folder-button">ğŸ“ Select Music Folder</button>
        <button id="clear-folder-button" style="display: none;">ğŸ—‘ï¸ Forget Folder</button>
        <button id="smart-playlist-button" disabled>ğŸ§  Smart Playlists</button>
        <label style="display: none; color: #fff; font-size: 14px; margin-left: 10px;" id="auto-reload-label">
        <input type="checkbox" id="auto-reload-check" checked>
        <!--Auto-reload folder-->
        </label>
        <button id="prev-button" disabled>â®ï¸ Previous</button>
        <button id="next-button" disabled>â­ï¸ Next</button>
        <button id="shuffle-button" disabled>ğŸ”€ Shuffle</button>
        <button id="loop-button" disabled>ğŸ” Loop Off</button>
        <button id="debug-toggle">ğŸ› Debug</button>
        <button id="compact-toggle">ğŸ“„ Full View</button>
        <button id="pip-toggle">ğŸ“º Float</button>
        <button id="sticky-toggle">ğŸ“Œ Sticky Off</button>
        <button id="fullscreen-lyrics-toggle">ğŸ¤ Fullscreen Lyrics</button>
        <button id="fullscreen-viz-toggle">ğŸŒŒ Fullscreen Visualizer</button>
        <button id="custom-bg-button">ğŸ¨ Background</button>
        <button id="auto-lyrics-btn">ğŸ¤ Auto-Fetch Lyrics</button>
    </div>

    <div id="volume-control">
        <span id="volume-icon">ğŸ”Š</span>
        <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="1">
        <span id="volume-percentage">100%</span>
    </div>

    <div id="equalizer-control">
        <div class="eq-header">
            <span class="eq-title">ğŸ›ï¸ Equalizer</span>
            <select id="eq-preset-select" class="eq-preset-dropdown">
            <option value="">Select Preset...</option>
            </select>
            <button id="eq-reset" class="eq-reset-btn">Reset</button>
            <button id="eq-reset" class="eq-reset-btn">Reset</button>
        </div>
        <div class="eq-bands">
            <div class="eq-band">
                <label class="eq-label">Bass</label>
                <input type="range" id="eq-bass" class="eq-slider" min="-12" max="12" step="0.5" value="0" orient="vertical">
                <span class="eq-value" id="bass-value">0 dB</span>
            </div>
            <div class="eq-band">
                <label class="eq-label">Mid</label>
                <input type="range" id="eq-mid" class="eq-slider" min="-12" max="12" step="0.5" value="0" orient="vertical">
                <span class="eq-value" id="mid-value">0 dB</span>
            </div>
            <div class="eq-band">
                <label class="eq-label">Treble</label>
                <input type="range" id="eq-treble" class="eq-slider" min="-12" max="12" step="0.5" value="0" orient="vertical">
                <span class="eq-value" id="treble-value">0 dB</span>
            </div>
        </div>
    </div>
    
    <div id="custom-progress-container">
        <div id="progress-bar"></div>
    </div>
    <div id="time-display">
        <span id="current-time">0:00</span>
        <span id="duration">0:00</span>
    </div>

    <div id="lyrics-display">
        <button id="export-lyrics-button" disabled>ğŸ“¥ Export</button>
        <div class="lyric-line">Lyrics will appear here when a track is loaded.</div>
    </div>

    <div id="player-wrapper">
        <canvas id="visualizer"></canvas>
        <video id="audio-player" preload="metadata" crossorigin="anonymous"></video> 
    </div>
    
    <div id="playlist-container">
    <div id="playlist-header">
        <h2>ğŸ“‹ Playlist</h2>
        <button id="jump-to-current" disabled>ğŸ¯ Current</button>
        <button id="clear-playlist" disabled>ğŸ—‘ï¸ Clear</button>
    </div>
    <input type="text" id="playlist-search" placeholder="ğŸ” Search playlist..." style="display: none;">
    <div id="playlist-items">
        <div class="empty-playlist">No tracks loaded yet. Click "Load Music & Lyrics" to get started!</div>
    </div>
</div>
    
    <div id="debug-panel"></div>

    <video id="pip-video" muted playsinline style="display:none;"></video>

    <!-- Fullscreen Visualizer Overlay -->
<div id="fullscreen-visualizer" class="fullscreen-viz-hidden">
    <div class="fullscreen-viz-controls">
        <button id="viz-mode-btn" class="viz-control-btn">ğŸ¨ Mode: Bars</button>
        <button id="viz-prev-btn" class="viz-control-btn">â—€ Previous</button>
        <button id="viz-play-pause-btn" class="viz-control-btn">â¸ Pause</button>
        <button id="viz-next-btn" class="viz-control-btn">â–¶ Next</button>
        <button id="viz-close-btn" class="viz-control-btn">âœ• Close (ESC)</button>
    </div>
    <canvas id="fullscreen-viz-canvas"></canvas>
    <div class="fullscreen-viz-info">
        <div class="fullscreen-viz-title">No track loaded</div>
        <div class="fullscreen-viz-artist">--</div>
        <div class="fullscreen-viz-time">
            <span id="viz-current-time">0:00</span> / <span id="viz-duration">0:00</span>
        </div>
    </div>
</div>

    <!-- Link to external JavaScript -->
    <script src="performance-manager.js"></script>
    <script src="audio-presets-manager.js"></script>
    <script src="visualizer-manager.js"></script>
    <script src="metadata-parser.js"></script>
    <script src="vtt-parser.js"></script>
    <script src="error-recovery.js"></script>
    <script src="metadata-editor.js"></script>
    <!-- Download system scripts -->
    <script src="url-processor.js"></script>
    <script src="download-manager.js"></script>
    <!-- Spotify and YouTube search -->
    <script src="spotify-playlist-parser.js"></script>
    <script src="youtube-search.js"></script>
    <script src="download-ui.js"></script>
    <script src="background-audio-handler.js"></script>
    <script src="music-analyzer.js"></script>
    <script src="smart-playlist-generator.js"></script>
    <script src="script.js"></script>

 <!-- ADD THIS RIGHT BEFORE </body> -->
<script src="mobile.js"></script>
<script src="sw-init.js"></script>
<script src="custom-background.js"></script>

    <!-- Fullscreen Lyrics with Edge Visualizer -->
<div id="fullscreen-lyrics" class="fullscreen-lyrics-hidden">
    <canvas id="fullscreen-lyrics-viz-canvas"></canvas>
    
    <button class="fullscreen-lyrics-close" id="lyrics-close-btn">âœ•</button>
    
    <div class="fullscreen-lyrics-content" id="fullscreen-lyrics-content">
        <div class="fullscreen-lyrics-empty">No lyrics available</div>
    </div>
    
    <div class="fullscreen-lyrics-controls">
        <button class="lyrics-control-btn" id="lyrics-prev-btn">â—€ Previous</button>
        <button class="lyrics-control-btn" id="lyrics-next-btn">Next â–¶</button>
    </div>
</div>

    <!-- Smart Playlist Modal -->
<div id="smart-playlist-modal" style="display: none;">
    <div class="smart-playlist-overlay"></div>
    <div class="smart-playlist-content">
        <div class="smart-playlist-header">
            <h2>ğŸ§  Smart Playlist Generator</h2>
            <button class="smart-playlist-close">âœ•</button>
        </div>
        
        <div class="smart-playlist-body">
            <!-- Analysis Section -->
            <div class="analysis-section">
                <h3>ğŸ“Š Step 1: Analyze Your Music</h3>
                <div class="button-group">
                    <button id="analyze-all-btn">ğŸ” Analyze All Tracks</button>
                    <button id="save-analysis-btn" disabled>ğŸ’¾ Save Analysis</button>
                </div>
                <div class="progress-container" id="analysis-progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="analysis-progress-fill">0%</div>
                    </div>
                    <div class="progress-text" id="analysis-progress-text">Ready to analyze...</div>
                </div>
            </div>
            
            <!-- Templates Section -->
            <div class="analysis-section">
                <h3>ğŸ¯ Step 2: Choose Playlist Type</h3>
                <div class="templates-grid" id="templates-grid">
                    <!-- Templates will be inserted here by JavaScript -->
                </div>
            </div>
            
            <!-- Results Section -->
            <div class="playlist-result" id="smart-playlist-result">
                <div class="playlist-header">
                    <div>
                        <h3 id="result-title">Playlist Generated</h3>
                        <p id="result-description" style="color: #aaa; margin-top: 5px;"></p>
                    </div>
                    <button id="load-smart-playlist-btn" class="success">â–¶ï¸ Load to Player</button>
                </div>
                
                <div class="playlist-stats" id="smart-playlist-stats">
                    <!-- Stats will be inserted here -->
                </div>
                
                <div class="track-list" id="smart-track-list">
                    <!-- Tracks will be inserted here -->
                </div>
            </div>
        </div>
    </div>
</div>

</body>
</html>